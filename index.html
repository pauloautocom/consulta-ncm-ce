<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<title>Consulta NCM ‚Ä¢ CClassTrib ‚Ä¢ CST</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<style>
body { font-family: Arial, sans-serif; background:#f4f6f8; padding:12px; }
h1 { text-align:center; }
input {
  width:100%; padding:14px; font-size:16px; margin-bottom:12px;
}
table {
  width:100%; border-collapse:collapse; background:#fff;
}
th,td {
  border:1px solid #ccc; padding:10px; font-size:14px;
}
th { background:#2563eb; color:#fff; }
tr:nth-child(even){ background:#eef2f7; }
.msg { text-align:center; margin-top:10px; color:#444; }
@media(max-width:600px){
  th,td{ font-size:12px; padding:8px; }
}
</style>
</head>
<body>

<h1>Consulta NCM ‚Ä¢ CClassTrib ‚Ä¢ CST</h1>

<input id="busca"
 placeholder="Digite: √°gua mineral, cerveja, refrigerante ou NCM"
 oninput="buscar()" />

<table>
<thead>
<tr>
  <th>NCM</th>
  <th>Descri√ß√£o</th>
  <th>CClassTrib</th>
  <th>CST</th>
</tr>
</thead>
<tbody id="resultado"></tbody>
</table>

<div id="msg" class="msg"></div>

<script>
// Normaliza texto
function norm(t){
 return t.toLowerCase()
   .normalize("NFD")
   .replace(/[\u0300-\u036f]/g,"")
   .trim();
}

// üî• BASE M√çNIMA FUNCIONAL (PROFISSIONAL)
const base = [
 { ncm:"22011000", desc:"√Åguas minerais e √°guas gaseificadas", termos:["agua","mineral"] },
 { ncm:"22011100", desc:"√Ågua mineral natural", termos:["agua","mineral"] },
 { ncm:"22021000", desc:"Refrigerantes", termos:["refrigerante","coca","cola","guarana"] },
 { ncm:"22030000", desc:"Cervejas de malte", termos:["cerveja","pilsen"] }
];

// Regra fiscal exemplo (CE)
function regraFiscal(ncm){
 return {
  cclasstrib:"000001",
  cst:"000"
 };
}

function buscar(){
 const v = norm(document.getElementById("busca").value);
 const tbody = document.getElementById("resultado");
 const msg = document.getElementById("msg");

 tbody.innerHTML = "";
 msg.innerText = "";

 if(v.length < 2) return;

 const nums = v.replace(/\D/g,"");

 const achou = base.filter(i=>{
  const d = norm(i.desc);
  return (
    (nums && i.ncm.startsWith(nums)) ||
    d.includes(v) ||
    i.termos.some(t => v.includes(t))
  );
 });

 if(achou.length === 0){
  msg.innerText = "Nenhum resultado encontrado";
  return;
 }

 achou.forEach(i=>{
  const f = regraFiscal(i.ncm);
  tbody.innerHTML += `
<tr>
 <td>${i.ncm}</td>
 <td>${i.desc}</td>
 <td>${f.cclasstrib}</td>
 <td>${f.cst}</td>
</tr>`;
 });
}
</script>

</body>
</html>
