<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<title>Consulta NCM • cClassTrib • CE</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<style>
body{font-family:Arial;background:#f4f6f8;padding:15px}
h1{text-align:center;font-size:20px}
input{width:100%;padding:14px;font-size:16px;border-radius:8px;border:1px solid #ccc}
table{width:100%;border-collapse:collapse;margin-top:15px;background:#fff}
th,td{border:1px solid #ddd;padding:8px;font-size:14px}
th{background:#2563eb;color:#fff}
tr:nth-child(even){background:#f1f5f9}
.msg{text-align:center;margin-top:10px;font-weight:bold;color:#b91c1c}
@media(max-width:600px){th,td{font-size:12px}}
</style>
</head>

<body>

<h1>Consulta NCM • cClassTrib • CST (CE)</h1>

<input id="busca"
placeholder="Digite: água mineral, cerveja, arroz ou 22011000"
oninput="buscar()">

<table>
<thead>
<tr>
<th>NCM</th>
<th>Produto</th>
<th>cClassTrib</th>
<th>Descrição</th>
<th>CST</th>
</tr>
</thead>
<tbody id="resultado"></tbody>
</table>

<div id="msg" class="msg"></div>

<script>
function norm(t){
 return t.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"");
}

/* ===== BASE MERCANTIL AMPLA ===== */
const base = [
{ncm:"22011000",nome:"Água mineral"},
{ncm:"22011100",nome:"Água mineral gaseificada"},
{ncm:"22021000",nome:"Refrigerante"},
{ncm:"22030000",nome:"Cerveja"},
{ncm:"22072020",nome:"Cachaça"},
{ncm:"10063021",nome:"Arroz"},
{ncm:"07133329",nome:"Feijão"},
{ncm:"19053100",nome:"Biscoito"},
{ncm:"19059090",nome:"Bolacha"},
{ncm:"15079011",nome:"Óleo vegetal"},
{ncm:"22090000",nome:"Vinagre"},
{ncm:"04072100",nome:"Ovo"},
{ncm:"02013000",nome:"Carne bovina"},
{ncm:"02071400",nome:"Frango"},
{ncm:"02032900",nome:"Carne suína"},
{ncm:"07020000",nome:"Tomate"},
{ncm:"07019000",nome:"Batata"},
{ncm:"08039000",nome:"Banana"},
{ncm:"08081000",nome:"Maçã"},
{ncm:"09011110",nome:"Café em grão"},
{ncm:"09012100",nome:"Café torrado"},
{ncm:"17019900",nome:"Açúcar"},
{ncm:"04012010",nome:"Leite UHT"},
{ncm:"04061010",nome:"Queijo"},
{ncm:"16010000",nome:"Linguiça"},
{ncm:"21069090",nome:"Achocolatado"},
{ncm:"21032010",nome:"Ketchup"},
{ncm:"21039011",nome:"Maionese"},
{ncm:"19022000",nome:"Macarrão"},
{ncm:"19023000",nome:"Lasanha"},
{ncm:"19011010",nome:"Farinha"},
{ncm:"23091000",nome:"Ração"},
{ncm:"33049990",nome:"Sabonete"},
{ncm:"34011190",nome:"Detergente"},
{ncm:"34022000",nome:"Sabão em pó"},
{ncm:"96081000",nome:"Caneta"},
{ncm:"48181000",nome:"Papel higiênico"},
{ncm:"39269090",nome:"Saco plástico"}
];

/* ===== REGRA FISCAL CORRETA ===== */
const cClassTrib="000001";
const descClass="Tributação integral";
const CST="000";

/* ===== BUSCA REAL ===== */
function buscar(){
 const termo = norm(document.getElementById("busca").value);
 const res = document.getElementById("resultado");
 const msg = document.getElementById("msg");
 res.innerHTML="";
 msg.innerText="";

 if(termo.length<2) return;

 const filtroNCM = termo.replace(/\D/g,"");

 const achados = base.filter(p=>{
   if(filtroNCM && p.ncm.startsWith(filtroNCM)) return true;
   return norm(p.nome).includes(termo);
 });

 if(!achados.length){
   msg.innerText="Nenhum resultado encontrado";
   return;
 }

 achados.forEach(p=>{
   res.innerHTML+=`
   <tr>
     <td>${p.ncm}</td>
     <td>${p.nome}</td>
     <td>${cClassTrib}</td>
     <td>${descClass}</td>
     <td>${CST}</td>
   </tr>`;
 });
}
</script>

</body>
</html>
