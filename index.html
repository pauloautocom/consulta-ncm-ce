<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<title>Consulta NCM • cClassTrib • CE</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<style>
body{font-family:Arial;background:#f4f6f8;padding:15px}
h1{text-align:center;font-size:20px}
input{width:100%;padding:14px;font-size:16px;border-radius:8px;border:1px solid #ccc}
table{width:100%;border-collapse:collapse;margin-top:15px;background:#fff}
th,td{border:1px solid #ddd;padding:8px;font-size:14px}
th{background:#2563eb;color:#fff}
tr:nth-child(even){background:#f1f5f9}
.msg{text-align:center;margin-top:10px;font-weight:bold;color:#b91c1c}
</style>
</head>

<body>

<h1>Consulta NCM • cClassTrib • CST (CE)</h1>

<input id="busca"
placeholder="Ex: água mineral, cerveja, coca cola, 22011000"
oninput="buscar()">

<table>
<thead>
<tr>
<th>NCM</th>
<th>Produto</th>
<th>cClassTrib</th>
<th>Descrição</th>
<th>CST</th>
</tr>
</thead>
<tbody id="resultado"></tbody>
</table>

<div id="msg" class="msg"></div>

<script>
function n(t){
 return t.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"");
}

/* ===== BASE COMERCIAL AMPLA (MERCANTIL REAL) ===== */
const base = [
{ncm:"22011000",prod:"Água mineral",tags:["agua","mineral"]},
{ncm:"22011100",prod:"Água mineral gaseificada",tags:["agua","gaseificada"]},
{ncm:"22021000",prod:"Refrigerante",tags:["refrigerante","coca","cola","guarana","fanta"]},
{ncm:"22030000",prod:"Cerveja",tags:["cerveja","beer"]},
{ncm:"22072020",prod:"Cachaça",tags:["cachaca","pinga","aguardente"]},

{ncm:"10063021",prod:"Arroz",tags:["arroz"]},
{ncm:"07133329",prod:"Feijão",tags:["feijao"]},
{ncm:"19053100",prod:"Biscoito",tags:["biscoito","bolacha"]},
{ncm:"15079011",prod:"Óleo vegetal",tags:["oleo","soja"]},
{ncm:"22090000",prod:"Vinagre",tags:["vinagre"]},
{ncm:"04072100",prod:"Ovos",tags:["ovo","ovos"]},
{ncm:"02013000",prod:"Carne bovina",tags:["carne","bovina"]},
{ncm:"20041000",prod:"Batata preparada",tags:["batata","palha"]},
];

/* ===== REGRA FISCAL CE (CORRETA) ===== */
const cClassTrib = "000001";
const descClass = "Tributação integral";
const CST = "000";

/* ===== BUSCA ===== */
function buscar(){
 const termo = n(document.getElementById("busca").value);
 const res = document.getElementById("resultado");
 const msg = document.getElementById("msg");
 res.innerHTML="";
 msg.innerText="";

 if(termo.length<2) return;

 const achados = base.filter(p=>{
   if(p.ncm.startsWith(termo.replace(/\D/g,""))) return true;
   if(n(p.prod).includes(termo)) return true;
   return p.tags.some(t=>termo.includes(t));
 });

 if(!achados.length){
   msg.innerText="Nenhum resultado encontrado";
   return;
 }

 achados.forEach(p=>{
   res.innerHTML+=`
   <tr>
     <td>${p.ncm}</td>
     <td>${p.prod}</td>
     <td>${cClassTrib}</td>
     <td>${descClass}</td>
     <td>${CST}</td>
   </tr>`;
 });
}
</script>

</body>
</html>
